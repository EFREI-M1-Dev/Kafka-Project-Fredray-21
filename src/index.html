<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather Dashboard</title>
    <style>
        /* Styles CSS pour la mise en forme */
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        .weather-card {
            border: 1px solid #ccc;
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .weather-card h2 {
            margin-bottom: 5px;
        }
        .weather-card .details {
            font-size: 0.9em;
            color: #666;
        }
    </style>
</head>
<body>
    <h1>Weather Dashboard</h1>

    <!-- Container pour afficher les données -->
    <div id="weatherContainer"></div>

    <!-- Script JavaScript pour récupérer et afficher les données -->
    <script>
        // Fonction pour mettre à jour l'affichage des données météo
        function updateWeather(weatherData) {
            const weatherContainer = document.getElementById('weatherContainer');
            const card = document.createElement('div');
            card.classList.add('weather-card');

            const location = weatherData.location;
            const current = weatherData.current;

            card.innerHTML = `
                <h2>${location.name}, ${location.country}</h2>
                <div class="details">
                    <p>Temperature: ${current.temp_c} °C / ${current.temp_f} °F</p>
                    <p>Condition: ${current.condition.text}</p>
                    <p>Humidity: ${current.humidity}%</p>
                    <p>Wind: ${current.wind_kph} km/h, ${current.wind_dir}</p>
                </div>
            `;

            weatherContainer.appendChild(card);
        }

        // Connexion WebSocket au backend (Node.js)
        const socket = new WebSocket('ws://localhost:80');

        socket.onmessage = function(event) {
            const weatherData = JSON.parse(event.data);
            updateWeather(weatherData);
        };
    </script>
</body>
</html>
